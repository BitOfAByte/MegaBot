"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const discord_akairo_1 = require("discord-akairo");
const discord_js_1 = require("discord.js");
const moment = require('moment');
const flags = {
    DISCORD_EMPLOYEE: 'Discord Employee',
    DISCORD_PARTNER: 'Discord Partner',
    BUGHUNTER_LEVEL_1: 'Bug Hunter (Level 1)',
    BUGHUNTER_LEVEL_2: 'Bug Hunter (Level 2)',
    HYPESQUAD_EVENTS: 'HypeSquad Events',
    HOUSE_BRAVERY: 'House of Bravery',
    HOUSE_BRILLIANCE: 'House of Brilliance',
    HOUSE_BALANCE: 'House of Balance',
    EARLY_SUPPORTER: 'Early Supporter',
    TEAM_USER: 'Team User',
    SYSTEM: 'System',
    VERIFIED_BOT: 'Verified Bot',
    VERIFIED_DEVELOPER: 'Verified Bot Developer'
};
class UserInfo extends discord_akairo_1.Command {
    constructor() {
        super("userinfo", {
            aliases: ["ui"],
            category: "Public",
            description: {
                content: "shows information about the member",
                usage: "ui [ member ]",
                examples: [
                    "userinfo @Nemijah#6301",
                    "ui Toby"
                ]
            },
            ratelimit: 3,
            args: [
                {
                    id: "member",
                    type: "member",
                    prompt: {
                        start: (msg) => `${msg.author}, please provide a member...`,
                        retry: (msg) => `${msg.author}, please provide a vaild member...`
                    }
                }
            ]
        });
    }
    async exec(message, { member }) {
        const roles = member.roles.cache
            .sort((a, b) => b.position - a.position)
            .map(role => role.toString())
            .slice(0, -1);
        const userFlags = member.user.flags.toArray();
        const embed = new discord_js_1.MessageEmbed()
            .setThumbnail(member.user.displayAvatarURL({ dynamic: true, size: 512 }))
            .setColor(member.displayHexColor || 'BLUE')
            .addField('User', [
            `**❯ Username:** ${member.user.username}`,
            `**❯ Discriminator:** ${member.user.discriminator}`,
            `**❯ ID:** ${member.id}`,
            `**❯ Flags:** ${userFlags.length ? userFlags.map(flag => flags[flag]).join(', ') : 'None'}`,
            `**❯ Avatar:** [Link to avatar](${member.user.displayAvatarURL({ dynamic: true })})`,
            `**❯ Time Created:** ${moment(member.user.createdTimestamp).format('LT')} ${moment(member.user.createdTimestamp).format('LL')} ${moment(member.user.createdTimestamp).fromNow()}`,
            `**❯ Status:** ${member.user.presence.status}`,
            `**❯ Game:** ${member.user.presence.activities || 'Not playing a game.'}`,
            `\u200b`
        ])
            .addField('Member', [
            `**❯ Highest Role:** ${member.roles.highest.id === message.guild.id ? 'None' : member.roles.highest.name}`,
            `**❯ Server Join Date:** ${moment(member.joinedAt).format('LL LTS')}`,
            `**❯ Hoist Role:** ${member.roles.hoist ? member.roles.hoist.name : 'None'}`,
            `**❯ Roles [${roles.length}]:** ${roles.length < 10 ? roles.join(', ') : roles.length > 10 ? await trimArray(roles) : 'None'}`,
            `\u200b`
        ]);
        return message.channel.send(embed);
    }
}
exports.default = UserInfo;
async function trimArray(arr, maxLen = 10) {
    if (arr.length > maxLen) {
        const len = arr.length - maxLen;
        arr = arr.slice(0, maxLen);
        arr.push(`${len} more...`);
    }
    return arr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlckluZm8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbWFuZHMvUHVibGljL1VzZXJJbmZvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbURBQXlDO0FBQ3pDLDJDQUFnRTtBQUNoRSxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFakMsTUFBTSxLQUFLLEdBQUc7SUFDVixnQkFBZ0IsRUFBRSxrQkFBa0I7SUFDcEMsZUFBZSxFQUFFLGlCQUFpQjtJQUNsQyxpQkFBaUIsRUFBRSxzQkFBc0I7SUFDekMsaUJBQWlCLEVBQUUsc0JBQXNCO0lBQ3pDLGdCQUFnQixFQUFFLGtCQUFrQjtJQUNwQyxhQUFhLEVBQUUsa0JBQWtCO0lBQ2pDLGdCQUFnQixFQUFFLHFCQUFxQjtJQUN2QyxhQUFhLEVBQUUsa0JBQWtCO0lBQ2pDLGVBQWUsRUFBRSxpQkFBaUI7SUFDbEMsU0FBUyxFQUFFLFdBQVc7SUFDdEIsTUFBTSxFQUFFLFFBQVE7SUFDaEIsWUFBWSxFQUFFLGNBQWM7SUFDNUIsa0JBQWtCLEVBQUUsd0JBQXdCO0NBQy9DLENBQUM7QUFFRixNQUFxQixRQUFTLFNBQVEsd0JBQU87SUFDekM7UUFDSSxLQUFLLENBQUMsVUFBVSxFQUFFO1lBQ2QsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQ2YsUUFBUSxFQUFFLFFBQVE7WUFDbEIsV0FBVyxFQUFFO2dCQUNULE9BQU8sRUFBRSxvQ0FBb0M7Z0JBQzdDLEtBQUssRUFBRSxlQUFlO2dCQUN0QixRQUFRLEVBQUU7b0JBQ04sd0JBQXdCO29CQUN4QixTQUFTO2lCQUNaO2FBQ0o7WUFDRCxTQUFTLEVBQUUsQ0FBQztZQUNaLElBQUksRUFBRTtnQkFDRjtvQkFDSSxFQUFFLEVBQUUsUUFBUTtvQkFDWixJQUFJLEVBQUUsUUFBUTtvQkFDZCxNQUFNLEVBQUU7d0JBQ0osS0FBSyxFQUFFLENBQUMsR0FBWSxFQUFFLEVBQUUsQ0FBQyxH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SyxDQUFDLE1BQU0sUUFBUSxLQUFLLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7WUFDOUgsUUFBUTtTQUNYLENBQUMsQ0FBQztRQUNQLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkMsQ0FBQztDQUNKO0FBdkRELDJCQXVEQztBQUVELEtBQUssVUFBVSxTQUFTLENBQUMsR0FBRyxFQUFHLE1BQU0sR0FBRyxFQUFFO0lBQ3RDLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLEVBQUU7UUFDckIsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDaEMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQyxDQUFDO0tBQzlCO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDZixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCJkaXNjb3JkLWFrYWlyb1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlRW1iZWQsIEd1aWxkTWVtYmVyIH0gZnJvbSBcImRpc2NvcmQuanNcIjtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcblxyXG5jb25zdCBmbGFncyA9IHtcclxuICAgIERJU0NPUkRfRU1QTE9ZRUU6ICdEaXNjb3JkIEVtcGxveWVlJyxcclxuICAgIERJU0NPUkRfUEFSVE5FUjogJ0Rpc2NvcmQgUGFydG5lcicsXHJcbiAgICBCVUdIVU5URVJfTEVWRUxfMTogJ0J1ZyBIdW50ZXIgKExldmVsIDEpJyxcclxuICAgIEJVR0hVTlRFUl9MRVZFTF8yOiAnQnVnIEh1bnRlciAoTGV2ZWwgMiknLFxyXG4gICAgSFlQRVNRVUFEX0VWRU5UUzogJ0h5cGVTcXVhZCBFdmVudHMnLFxyXG4gICAgSE9VU0VfQlJBVkVSWTogJ0hvdXNlIG9mIEJyYXZlcnknLFxyXG4gICAgSE9VU0VfQlJJTExJQU5DRTogJ0hvdXNlIG9mIEJyaWxsaWFuY2UnLFxyXG4gICAgSE9VU0VfQkFMQU5DRTogJ0hvdXNlIG9mIEJhbGFuY2UnLFxyXG4gICAgRUFSTFlfU1VQUE9SVEVSOiAnRWFybHkgU3VwcG9ydGVyJyxcclxuICAgIFRFQU1fVVNFUjogJ1RlYW0gVXNlcicsXHJcbiAgICBTWVNURU06ICdTeXN0ZW0nLFxyXG4gICAgVkVSSUZJRURfQk9UOiAnVmVyaWZpZWQgQm90JyxcclxuICAgIFZFUklGSUVEX0RFVkVMT1BFUjogJ1ZlcmlmaWVkIEJvdCBEZXZlbG9wZXInXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyBleHRlbmRzIENvbW1hbmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJ1c2VyaW5mb1wiLCB7XHJcbiAgICAgICAgICAgIGFsaWFzZXM6IFtcInVpXCJdLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJQdWJsaWNcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwic2hvd3MgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1lbWJlclwiLFxyXG4gICAgICAgICAgICAgICAgdXNhZ2U6IFwidWkgWyBtZW1iZXIgXVwiLFxyXG4gICAgICAgICAgICAgICAgZXhhbXBsZXM6IFtcclxuICAgICAgICAgICAgICAgICAgICBcInVzZXJpbmZvIEBOZW1pamFoIzYzMDFcIixcclxuICAgICAgICAgICAgICAgICAgICBcInVpIFRvYnlcIlxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYXRlbGltaXQ6IDMsXHJcbiAgICAgICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogXCJtZW1iZXJcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1lbWJlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21wdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogKG1zZzogTWVzc2FnZSkgPT4gYCR7bXNnLmF1dGhvcn0sIHBsZWFzZSBwcm92aWRlIGEgbWVtYmVyLi4uYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnk6IChtc2c6IE1lc3NhZ2UpID0+IGAke21zZy5hdXRob3J9LCBwbGVhc2UgcHJvdmlkZSBhIHZhaWxkIG1lbWJlci4uLmBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBleGVjKG1lc3NhZ2U6IE1lc3NhZ2UsIHsgbWVtYmVyIH06IHsgbWVtYmVyOiBHdWlsZE1lbWJlciB9KTogUHJvbWlzZTxNZXNzYWdlPiB7XHJcbiAgICAgICAgY29uc3Qgcm9sZXMgPSBtZW1iZXIucm9sZXMuY2FjaGVcclxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIucG9zaXRpb24gLSBhLnBvc2l0aW9uKVxyXG4gICAgICAgICAgICAubWFwKHJvbGUgPT4gcm9sZS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJGbGFncyA9IG1lbWJlci51c2VyLmZsYWdzLnRvQXJyYXkoKTtcclxuICAgICAgICBjb25zdCBlbWJlZCA9IG5ldyBNZXNzYWdlRW1iZWQoKVxyXG4gICAgICAgICAgICAuc2V0VGh1bWJuYWlsKG1lbWJlci51c2VyLmRpc3BsYXlBdmF0YXJVUkwoeyBkeW5hbWljOiB0cnVlLCBzaXplOiA1MTIgfSkpXHJcbiAgICAgICAgICAgIC5zZXRDb2xvcihtZW1iZXIuZGlzcGxheUhleENvbG9yIHx8ICdCTFVFJylcclxuICAgICAgICAgICAgLmFkZEZpZWxkKCdVc2VyJywgW1xyXG4gICAgICAgICAgICAgICAgYCoq4p2vIFVzZXJuYW1lOioqICR7bWVtYmVyLnVzZXIudXNlcm5hbWV9YCxcclxuICAgICAgICAgICAgICAgIGAqKuKdryBEaXNjcmltaW5hdG9yOioqICR7bWVtYmVyLnVzZXIuZGlzY3JpbWluYXRvcn1gLFxyXG4gICAgICAgICAgICAgICAgYCoq4p2vIElEOioqICR7bWVtYmVyLmlkfWAsXHJcbiAgICAgICAgICAgICAgICBgKirina8gRmxhZ3M6KiogJHt1c2VyRmxhZ3MubGVuZ3RoID8gdXNlckZsYWdzLm1hcChmbGFnID0+IGZsYWdzW2ZsYWddKS5qb2luKCcsICcpIDogJ05vbmUnfWAsXHJcbiAgICAgICAgICAgICAgICBgKirina8gQXZhdGFyOioqIFtMaW5rIHRvIGF2YXRhcl0oJHttZW1iZXIudXNlci5kaXNwbGF5QXZhdGFyVVJMKHsgZHluYW1pYzogdHJ1ZSB9KX0pYCxcclxuICAgICAgICAgICAgICAgIGAqKuKdryBUaW1lIENyZWF0ZWQ6KiogJHttb21lbnQobWVtYmVyLnVzZXIuY3JlYXRlZFRpbWVzdGFtcCkuZm9ybWF0KCdMVCcpfSAke21vbWVudChtZW1iZXIudXNlci5jcmVhdGVkVGltZXN0YW1wKS5mb3JtYXQoJ0xMJyl9ICR7bW9tZW50KG1lbWJlci51c2VyLmNyZWF0ZWRUaW1lc3RhbXApLmZyb21Ob3coKX1gLFxyXG4gICAgICAgICAgICAgICAgYCoq4p2vIFN0YXR1czoqKiAke21lbWJlci51c2VyLnByZXNlbmNlLnN0YXR1c31gLFxyXG4gICAgICAgICAgICAgICAgYCoq4p2vIEdhbWU6KiogJHttZW1iZXIudXNlci5wcmVzZW5jZS5hY3Rpdml0aWVzfHwgJ05vdCBwbGF5aW5nIGEgZ2FtZS4nfWAsXHJcbiAgICAgICAgICAgICAgICBgXFx1MjAwYmBcclxuICAgICAgICAgICAgXSlcclxuICAgICAgICAgICAgLmFkZEZpZWxkKCdNZW1iZXInLCBbXHJcbiAgICAgICAgICAgICAgICBgKirina8gSGlnaGVzdCBSb2xlOioqICR7bWVtYmVyLnJvbGVzLmhpZ2hlc3QuaWQgPT09IG1lc3NhZ2UuZ3VpbGQuaWQgPyAnTm9uZScgOiBtZW1iZXIucm9sZXMuaGlnaGVzdC5uYW1lfWAsXHJcbiAgICAgICAgICAgICAgICBgKirina8gU2VydmVyIEpvaW4gRGF0ZToqKiAke21vbWVudChtZW1iZXIuam9pbmVkQXQpLmZvcm1hdCgnTEwgTFRTJyl9YCxcclxuICAgICAgICAgICAgICAgIGAqKuKdryBIb2lzdCBSb2xlOioqICR7bWVtYmVyLnJvbGVzLmhvaXN0ID8gbWVtYmVyLnJvbGVzLmhvaXN0Lm5hbWUgOiAnTm9uZSd9YCxcclxuICAgICAgICAgICAgICAgIGAqKuKdryBSb2xlcyBbJHtyb2xlcy5sZW5ndGh9XToqKiAke3JvbGVzLmxlbmd0aCA8IDEwID8gcm9sZXMuam9pbignLCAnKSA6IHJvbGVzLmxlbmd0aCA+IDEwID8gYXdhaXQgdHJpbUFycmF5KHJvbGVzKSA6ICdOb25lJ31gLFxyXG4gICAgICAgICAgICAgICAgYFxcdTIwMGJgXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZChlbWJlZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRyaW1BcnJheShhcnIsICBtYXhMZW4gPSAxMCkge1xyXG4gICAgaWYgKGFyci5sZW5ndGggPiBtYXhMZW4pIHtcclxuICAgICAgICBjb25zdCBsZW4gPSBhcnIubGVuZ3RoIC0gbWF4TGVuO1xyXG4gICAgICAgIGFyciA9IGFyci5zbGljZSgwLCBtYXhMZW4pO1xyXG4gICAgICAgIGFyci5wdXNoKGAke2xlbn0gbW9yZS4uLmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxufSJdfQ==